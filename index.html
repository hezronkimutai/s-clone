<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Master - Slido Clone</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="app">
        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <div class="container">
                <h1>Quiz Master</h1>
                <div class="home-options">
                    <button id="create-quiz-btn" class="btn primary">Create Quiz</button>
                    <div class="join-section">
                        <h3>Available Quizzes</h3>
                        <div id="available-quizzes" class="quiz-list">
                            <div class="loading-message">Loading available quizzes...</div>
                        </div>
                        <button id="refresh-quizzes-btn" class="btn secondary">ðŸ”„ Refresh</button>
                    </div>
                    <div class="memory-bank-access">
                        <a href="memory-bank/index.html" class="btn tertiary">ðŸ§  Memory Bank</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Quiz Screen -->
        <div id="create-screen" class="screen">
            <div class="container">
                <h2>Create Quiz Session</h2>
                <input type="text" id="host-name-input" placeholder="Your Name" required>
                <div class="quiz-options">
                    <button id="start-quiz-btn" class="btn primary">Start Quiz</button>
                    <button id="manage-questions-btn" class="btn secondary">Manage Questions</button>
                    <button id="back-to-home-btn" class="btn secondary">Back</button>
                </div>
            </div>
        </div>

        <!-- Question Management Screen -->
        <div id="questions-screen" class="screen">
            <div class="container">
                <h2>Manage Questions</h2>
                
                <div class="section">
                    <h3>Add New Question</h3>
                    <div class="question-form">
                        <textarea id="new-question-text" placeholder="Enter your question..." rows="3"></textarea>
                        
                        <div class="options-input">
                            <input type="text" id="option-a" placeholder="Option A" required>
                            <input type="text" id="option-b" placeholder="Option B" required>
                            <input type="text" id="option-c" placeholder="Option C" required>
                            <input type="text" id="option-d" placeholder="Option D" required>
                        </div>
                        
                        <div class="correct-answer">
                            <label>Correct Answer:</label>
                            <select id="correct-option">
                                <option value="0">A</option>
                                <option value="1">B</option>
                                <option value="2">C</option>
                                <option value="3">D</option>
                            </select>
                        </div>
                        
                        <button id="add-question-btn" class="btn primary">Add Question</button>
                    </div>
                </div>

                <div class="section">
                    <h3>Existing Questions</h3>
                    <div id="questions-list"></div>
                    <button id="load-default-questions-btn" class="btn secondary">Load Default Questions</button>
                </div>

                <div class="quiz-options">
                    <button id="back-to-create-btn" class="btn secondary">Back to Create Quiz</button>
                </div>
            </div>
        </div>

        <!-- Join Quiz Screen -->
        <div id="join-screen" class="screen">
            <div class="container">
                <h2>Join Quiz</h2>
                <input type="text" id="participant-name-input" placeholder="Your Name" required>
                <button id="join-session-btn" class="btn primary">Join Session</button>
                <button id="back-to-home-join-btn" class="btn secondary">Back</button>
            </div>
        </div>

        <!-- Host Dashboard -->
        <div id="host-dashboard" class="screen">
            <div class="container">
                <div class="quiz-header">
                    <h2>Quiz Session</h2>
                    <div class="quiz-info">
                        <span>Code: <strong id="session-code"></strong></span>
                        <span>Participants: <span id="participant-count">0</span></span>
                    </div>
                </div>

                <div class="share-link">
                    <h4>Share this quiz with participants:</h4>
                    <div id="quiz-share-url" class="share-url"></div>
                    <button id="copy-link-btn" class="copy-link-btn">ðŸ“‹ Copy Link</button>
                </div>

                <div id="waiting-room" class="section">
                    <h3>Waiting for participants...</h3>
                    <div id="participants-list"></div>
                    <button id="start-questions-btn" class="btn primary">Start Quiz</button>
                </div>

                <div id="question-display" class="section hidden">
                    <div class="question-header">
                        <span>Question <span id="current-question-num">1</span> of <span id="total-questions">10</span></span>
                        <div class="timer">
                            <span id="timer-display">20</span>s
                        </div>
                    </div>
                    <h3 id="question-text"></h3>
                    <div id="answer-options"></div>
                    <button id="next-question-btn" class="btn primary hidden">Next Question</button>
                    <div id="question-results" class="hidden">
                        <h4>Results:</h4>
                        <div id="answer-stats"></div>
                    </div>
                </div>

                <div id="final-results" class="section hidden">
                    <h3>Final Results</h3>
                    <div id="leaderboard"></div>
                    <button id="new-quiz-btn" class="btn primary">Start New Quiz</button>
                </div>
            </div>
        </div>

        <!-- Participant View -->
        <div id="participant-view" class="screen">
            <div class="container">
                <div class="participant-header">
                    <h2>Quiz Session</h2>
                    <span>Welcome, <span id="participant-name-display"></span>!</span>
                </div>

                <div id="participant-waiting" class="section">
                    <h3>Waiting for quiz to start...</h3>
                    <p>Quiz Code: <strong id="participant-session-code"></strong></p>
                </div>

                <div id="participant-question" class="section hidden">
                    <div class="question-header">
                        <span>Question <span id="participant-question-num">1</span> of <span id="participant-total-questions">10</span></span>
                        <div class="timer">
                            <span id="participant-timer">20</span>s
                        </div>
                    </div>
                    <h3 id="participant-question-text"></h3>
                    <div id="participant-options"></div>
                    <div id="participant-feedback" class="hidden"></div>
                </div>

                <div id="participant-results" class="section hidden">
                    <h3>Quiz Complete!</h3>
                    <div class="score-display">
                        <p>Your Score: <span id="participant-score">0</span>/<span id="participant-final-total">10</span></p>
                        <p>Your Rank: <span id="participant-rank">-</span></p>
                    </div>
                    <div id="participant-leaderboard"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Environment variables loader -->
    <script src="env-loader.js"></script>
    
    <!-- Main application -->
    <script src="app.js"></script>
</body>

</html>